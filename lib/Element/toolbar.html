<template id="type-toolbar">
    <style>
        @import "/modules/wwi/component/design/host.css";

        :host{
            display:block;
            position: relative;
            width: 100%;
            max-width: 100%;
            height:34px;
            background-color: var(--background,white);
            z-index: 1;
            border-bottom:var(--border,1px solid var(--toolbar-button,lightgray));
        }

        content-action,
        ::slotted(content-action){
            --height:26px;
            border:none;
            background-color: var(--toolbar-text,whitesmoke);
            color:var(--toolbar-button,var(--grape));
            font-size:16px;
            font-weight: bold;
        }

        *::slotted(*[aria-selected="true"]),
        [view] > *[aria-selected="true"]{
            color: var(--toolbar-text,whitesmoke);
            background-color: var(--toolbar-button,var(--grape));
        }

        [items]{
            position: relative;
            display: inline-block;
            height:100%;
            max-height: 100%;
        }

        [view] > :first-child{
            margin-left:4px;
        }
        [view] > :last-child{
            margin-right:4px;
        }

        [right],
        [left]{
            width:20px;
            height:20px;
        }

        [docs-button]{
            --width:100px;
            max-width: 100px;
            text-align: center;
        }

        [button-title]{
            position: relative;
            width: 84px;
            text-align: center;
            top:1px;
        }

        [view]{
            padding-top:1px;
        }


    </style>

    <div view gui horizontal center-center>
        <div left gui flex-1></div>
        <div items gui horizontal center-center justified flex-6>
            <slot id="items"></slot>
        </div>
        <div right gui flex-1></div>
        <content-action docs-button flex
                        centered
                        onclick="act.toggle_docs(event)">
            Type API
        </content-action>
    </div>
</template>
<script>
    (function(doc){
        const TypeToolbar = wwi.element(doc)

        TypeToolbar(class extends TypeToolbar.Element{
        	constructor(){
        		super('routes',{
        			navigation:set_navigation
                })
            }
            get buttons(){ return this.slots.buttons.items }
            get docs(){ return this.query('[docs-button]') }
            get navigator(){ return this.query('type-navigator') }
	        toggle_docs(e){
                let item = toggle_item_selection(event)
                if(item.selected) this.supermodel.frame.show()
                else this.supermodel.frame.hide()
            }
        })

        //shared actions
        function set_navigation(value){
	        let navigators = this.navigator
	        if(value !== null){
		        if(!navigators){
			        navigators = document.createElement('type-navigator')
			        let left = this.query('[left]')
                    navigators.on.back = e => this.dispatch('navigation',{type:'back',navigator:this.navigator})
                    navigators.on.next = e => this.dispatch('navigation',{type:'next',navigator:this.navigator})
			        this.view.insertBefore(navigators,left)
		        }
	        }
	        else if(navigators) navigators.remove()
            return null
        }
        function toggle_item_selection(event){
	        let item = event.currentTarget
	        let selected = false
	        if(item.getAttribute('aria-selected') === "true") selected = true
            item.selected = !selected
            item.setAttribute('aria-selected',item.selected)
            return item
        }

    })(document)
</script>
